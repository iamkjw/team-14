<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script src="opcode.js"></script>
  <script src="Chip8.js"></script>
</head>
<body>
<canvas id="screen" width="1080" height="760"></canvas>
  <div>
      Select a game file:
      <input type="file" id="fileInput">
    </div>
  <script>
	var pause=false;
  window.onload = function() {
      var fileInput = document.getElementById('fileInput');
      fileInput.addEventListener('change', function(e) {
        var file = fileInput.files[0];
        Processor.Reset();
        Processor.LoadProgram(file);
      });
  }
  setInterval(function(){
    if(Processor.PROGRAM_LOADED == true)
    {
			if(pause==false){
				Processor.RunCycle();
	      Processor.RunCycle();
	      Processor.RunCycle();
	      Processor.RunCycle();
	      Processor.RunCycle();
	      Processor.RunCycle();
	      Processor.RunCycle();
	      Processor.RunCycle();
			}

    }
  }, 16);
  setInterval(function(){
    if(Processor.PROGRAM_LOADED == true)
      Processor.DebugRender();
  }, 16);
	function pauseEmu() {
  	pause=true;
	}

	function continueEmu() {
  	pause=false;
	}

	function next(){
		if(pause==true){
			Processor.RunCycle();
		}
	}

  </script>

</body>
<div id="opcode">I will be updated (opcode)</div>
<div id="function">I will be updated (function)</div>
<button onclick="pauseEmu()">Pause</button>
<button onclick="continueEmu()">Continue</button>
<button onclick="next()">Next</button>
</html>
